spec_version: 0.1.4
indicators:
  error_rate: metricSelector=builtin:service.errors.total.rate:merge("dt.entity.service"):avg&entitySelector=type(SERVICE),tag(keptn_managed),tag(keptn_service:easytravel-backend)
  response_time_p50: metricSelector=builtin:service.response.time:toUnit(MicroSecond,MilliSecond):merge("dt.entity.service"):percentile(50)&entitySelector=type(SERVICE),tag(keptn_managed),tag(keptn_service:easytravel-backend)
  response_time_p90: metricSelector=builtin:service.response.time:toUnit(MicroSecond,MilliSecond):merge("dt.entity.service"):percentile(90)&entitySelector=type(SERVICE),tag(keptn_managed),tag(keptn_service:easytravel-backend)
  throughput: metricSelector=builtin:service.requestCount.total:merge("dt.entity.service"):sum&entitySelector=type(SERVICE),tag(keptn_managed),tag(keptn_service:easytravel-backend)
  process_cpu_avg: metricSelector=builtin:tech.generic.cpu.usage:splitBy():avg&entitySelector=type(PROCESS_GROUP_INSTANCE),tag([Kubernetes]tier:backend),tag(kubernetes-namespace:easytravel-nonprod)
  process_mem_avg: metricSelector=builtin:tech.generic.mem.usage:splitBy():avg&entitySelector=type(PROCESS_GROUP_INSTANCE),tag([Kubernetes]tier:backend),tag(kubernetes-namespace:easytravel-nonprod)
  process_thread_avg: metricSelector=builtin:tech.jvm.threads.count:splitBy():avg&entitySelector=type(PROCESS_GROUP_INSTANCE),tag([Kubernetes]tier:backend),tag(kubernetes-namespace:easytravel-nonprod)
  process_gc_avg: metricSelector=builtin:tech.jvm.memory.gc.suspensionTime:splitBy():avg&entitySelector=type(PROCESS_GROUP_INSTANCE),tag([Kubernetes]tier:backend),tag(kubernetes-namespace:easytravel-nonprod)
  container_cpu_limit: metricSelector=builtin:containers.cpu.usagePercent:filter(and(eq(Container,easytravel-backend))):splitBy()&entitySelector=type(CONTAINER_GROUP_INSTANCE),mzName(k8s-easytravel-nonprod)
  container_mem_limit: metricSelector=builtin:containers.memory.usagePercent:filter(and(eq(Container,easytravel-backend))):splitBy()&entitySelector=type(CONTAINER_GROUP_INSTANCE),mzName(k8s-easytravel-nonprod)
  appsec_vuln_critical: SECPV2;securityProblemSelector=status("open"),riskLevel("CRITICAL"),affectedPgNames("eks easytravel-nonprod.easytravel-backend")
  appsec_vuln_high: SECPV2;securityProblemSelector=status("open"),riskLevel("HIGH"),affectedPgNames("eks easytravel-nonprod.easytravel-backend")
